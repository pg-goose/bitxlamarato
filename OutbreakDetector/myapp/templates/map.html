<div id="map"></div>
<script>
  const alerts = [
    {% for alert in alertas %}
     {{ alert|safe }},
    {% endfor %}
  ];
  console.log(alerts);
  const map = L.map('map').setView([0, 0], 2); // Default center
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
  }).addTo(map);

  alerts.forEach(alert => {
    const marker = L.marker([alert.lat, alert.lon]).addTo(map);
    marker.bindPopup(`
      <strong>${alert.escola}</strong><br>
      ${alert.quantitat} casos de ${alert.simptoma.label}
    `);
  });

  if (alerts.length > 0) {
    const bounds = L.latLngBounds(alerts.map(a => [a.lat, a.lon]));
    map.fitBounds(bounds);
  }
</script>